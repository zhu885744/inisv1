# inis

inis 是一款基于 Go 语言开发的高性能内容管理系统（CMS），基于 Gin 框架二次开发，采用 Gorm 作为数据库 ORM 工具，设计风格参考 ThinkPHP 6 的简洁架构理念。系统以 "轻量核心、高效响应、灵活扩展" 为核心定位，致力于为开发者提供易上手、具备良好扩展基础的 CMS 解决方案，同时满足企业级应用的性能与安全需求。

## 快速开始

### 运行
> 运行前请先安装 [Go](https://golang.org/dl/)，然后在项目根目录下执行以下命令：
```bash
go run main.go
```
> 如需后台运行，可以使用以下命令编译：
```bash
go build -ldflags -H=windowsgui
```
> 使用 [bee](https://github.com/beego/bee) 工具打包：
```bash
bee pack -ba="-ldflags -H=windowsgui"
```

### 打包
> 部署前请先安装 [Go](https://golang.org/dl/)，然后在项目根目录下双击 `build.bat` 即可，编译完成后会生成可执行文件，将其放到服务器上即可运行。

## 系统架构

### 技术栈
- **底层框架**：基于 Gin 实现的高性能 HTTP 服务，毫秒级响应能力满足高并发场景
- **数据交互**：集成 Gorm 实现数据库操作抽象，支持多种关系型数据库（MySQL、PostgreSQL 等）

### 核心功能
- **配置管理系统**：支持动态配置存储与缓存，灵活管理系统参数
- **多语言国际化**：内置中、英、日、韩、俄等语言包，支持自定义扩展
- **安全防护机制**：包含安装锁（install.lock）、API 签名验证、请求限流（QPS 控制）等基础防护
- **媒体资源处理**：支持图片动态压缩、格式转换及多种存储模式（本地存储为基础，预留云存储扩展接口）
- **高效缓存策略**：实现内存缓存机制，支持按标签批量清理缓存，提升数据查询效率

## 配置说明

### 配置文件
配置文件位于 `config` 目录下，主要包括：
- `app.go`：应用配置核心逻辑（启动服务等）
- `i18n/`：国际化语言配置目录，包含各语言的翻译文件

### 版本管理
后端版本号定义在 `app/facade/const.go` 文件中，可根据需要修改。

### API 接口文档
本文档详细标注了如何在开发主题中使用自定义接口。

登录后，可通过访问 swagger 访问地址：https://{host}/swagger/index.html 查看所有 API。


## 目录结构

```
inisv1/
├── .gitignore          # Git忽略文件配置
├── LICENSE             # 项目许可证
├── README.md           # 项目说明文档（功能、运行、规划等）
├── build.bat           # 编译脚本（生成可执行文件）
├── go.mod              # Go模块依赖配置
├── go.sum              # 依赖校验文件
├── install.lock        # 安装锁文件（标记是否完成初始化）
├── main.go             # 程序入口文件
├── public/             # 静态资源目录
│   └── index.html      # 静态首页
├── config/             # 配置文件目录
│   ├── .gitignore      # 配置目录的Git忽略规则
│   ├── app.go          # 应用配置核心逻辑（启动服务等）
│   └── i18n/           # 国际化语言配置
└── app/                # 核心业务代码目录
    ├── api/            # API接口相关（控制器、路由）
    ├── dev/            # 开发相关功能（系统信息、调试等）
    ├── facade/         # 门面层（封装核心服务、工具）
    ├── index/          # 首页相关路由/控制器
    ├── inis/           # 框架核心功能（基础控制器等）
    ├── middleware/     # 中间件（CORS、权限校验等）
    ├── model/          # 数据模型（与数据库交互）
    ├── socket/         # WebSocket相关（实时通信）
    ├── timer/          # 定时任务（日志清理等）
    └── validator/      # 数据验证器
```

## 逻辑梳理
- 创建时间（CreateTime）：用户点击 “创建文章” 时生成，终身不变，若发布时间自定义为上个月-数则和发布时间同步
- 发布时间（PublishTime）：用户点击 “发布文章” 时生成，仅在首次发布时设置。
- 更新时间（UpdateTime）：每次编辑并保存文章时自动刷新，包括发布后再次编辑的场景。

## 更新日志
[1.0.0]更新内容
- 优化：调整接口允许自定义文章、独立页面发布时间[已开发，待测试]
- 新增：阿里云号码认证-短信认证接口，此接口无需企业认证，无需申请资质、模板、签名，个人企业均可即可使用[已开发，已测试，可正常使用]
- 新增：媒体管理接口，可编辑已开启的存储方式内的附件信息，管理附件等[开发中]
- 新增：用户状态管理，可自定义用户账号状态如冻结、正常[已开发，已测试，可正常使用]
- 新增：文章浏览量冷却CD功能[已开发，已测试，待发布内测]
- 新增：评论审核功能，支持接口一键操作评论是否需要审核[开发中]