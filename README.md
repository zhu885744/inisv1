# inis

inis 是一款基于 Go 语言开发的高性能内容管理系统（CMS），基于 Gin 框架二次开发，采用 Gorm 作为数据库 ORM 工具，设计风格参考 ThinkPHP 6 的简洁架构理念。系统以 "轻量核心、高效响应、灵活扩展" 为核心定位，致力于为开发者提供易上手、具备良好扩展基础的 CMS 解决方案，同时满足企业级应用的性能与安全需求。

## 快速开始

### 运行
> 运行前请先安装 [Go](https://golang.org/dl/)，然后在项目根目录下执行以下命令：
```bash
go run main.go
```
> 如需后台运行，可以使用以下命令编译：
```bash
go build -ldflags -H=windowsgui
```
> 使用 [bee](https://github.com/beego/bee) 工具打包：
```bash
bee pack -ba="-ldflags -H=windowsgui"
```

### 打包
> 部署前请先安装 [Go](https://golang.org/dl/)，然后在项目根目录下双击 `build.bat` 即可，编译完成后会生成可执行文件，将其放到服务器上即可运行。

## 系统架构

### 技术栈
- **底层框架**：基于 Gin 实现的高性能 HTTP 服务，毫秒级响应能力满足高并发场景
- **数据交互**：集成 Gorm 实现数据库操作抽象，支持多种关系型数据库（MySQL、PostgreSQL 等）

### 核心功能
- **配置管理系统**：支持动态配置存储与缓存，灵活管理系统参数
- **多语言国际化**：内置中、英、日、韩、俄等语言包，支持自定义扩展
- **安全防护机制**：包含安装锁（install.lock）、API 签名验证、请求限流（QPS 控制）等基础防护
- **媒体资源处理**：支持图片动态压缩、格式转换及多种存储模式（本地存储为基础，预留云存储扩展接口）
- **高效缓存策略**：实现内存缓存机制，支持按标签批量清理缓存，提升数据查询效率

## 配置说明

### 配置文件
配置文件位于 `config` 目录下，主要包括：
- `app.go`：应用配置核心逻辑（启动服务等）
- `i18n/`：国际化语言配置目录，包含各语言的翻译文件

### 版本管理
系统后端版本号定义在 `app/facade/const.go` 文件中，可根据需要修改。

## 目录结构

```
inisv1/
├── .gitignore          # Git忽略文件配置
├── LICENSE             # 项目许可证
├── README.md           # 项目说明文档（功能、运行、规划等）
├── build.bat           # 编译脚本（生成可执行文件）
├── go.mod              # Go模块依赖配置
├── go.sum              # 依赖校验文件
├── install.lock        # 安装锁文件（标记是否完成初始化）
├── main.go             # 程序入口文件
├── public/             # 静态资源目录
│   └── index.html      # 静态首页
├── config/             # 配置文件目录
│   ├── .gitignore      # 配置目录的Git忽略规则
│   ├── app.go          # 应用配置核心逻辑（启动服务等）
│   └── i18n/           # 国际化语言配置
└── app/                # 核心业务代码目录
    ├── api/            # API接口相关（控制器、路由）
    ├── dev/            # 开发相关功能（系统信息、调试等）
    ├── facade/         # 门面层（封装核心服务、工具）
    ├── index/          # 首页相关路由/控制器
    ├── inis/           # 框架核心功能（基础控制器等）
    ├── middleware/     # 中间件（CORS、权限校验等）
    ├── model/          # 数据模型（与数据库交互）
    ├── socket/         # WebSocket相关（实时通信）
    ├── timer/          # 定时任务（日志清理等）
    └── validator/      # 数据验证器
```

## 未来规划

### 初期开发扩展功能

基于系统现有架构和核心功能，初期开发阶段优先扩展以下功能，以增强系统的实用性和开发体验：

#### 1. 管理后台完善
- **功能描述**：开发基础的管理后台界面，提供直观的系统配置、内容管理和用户管理功能
- **实现价值**：降低系统使用门槛，提升用户体验，使非技术用户也能轻松管理内容
- **技术方向**：
  - 基于现有 `app/api/controller` 结构扩展管理后台控制器
  - 采用前后端分离架构，前端可使用 Vue/React 框架
  - 集成基础的 UI 组件库，如 Element UI 或 Ant Design

#### 2. 内容管理增强
- **功能描述**：扩展内容模型，支持更多内容类型和字段配置
- **实现价值**：满足不同场景的内容管理需求，提升系统灵活性
- **技术方向**：
  - 在 `app/model` 中扩展内容模型，支持自定义字段
  - 在 `app/api/controller` 中添加内容类型管理接口
  - 实现内容的分类、标签和搜索功能

#### 3. 安全功能提升
- **功能描述**：增强系统的安全防护能力，完善权限管理
- **实现价值**：提升系统安全性，满足企业级应用的安全需求
- **技术方向**：
  - 完善 `app/middleware` 中的权限验证中间件
  - 实现基于角色的访问控制（RBAC）
  - 增强密码加密和会话管理功能

#### 4. 开发与调试工具
- **功能描述**：提供开发调试工具，简化开发过程
- **实现价值**：提升开发效率，降低开发难度
- **技术方向**：
  - 扩展 `app/dev` 模块，添加 API 文档生成工具（如 Swagger）
  - 实现系统日志查看和调试功能
  - 提供代码生成工具，自动生成基础代码结构

#### 5. 系统监控与统计
- **功能描述**：添加系统监控和统计功能，了解系统运行状况
- **实现价值**：帮助管理员及时发现问题，优化系统性能
- **技术方向**：
  - 在 `app/api/controller` 中添加系统监控接口
  - 实现访问统计、性能监控和异常告警功能
  - 集成图表库，可视化展示统计数据

#### 6. 第三方服务集成
- **功能描述**：支持更多第三方服务的快速集成
- **实现价值**：扩展系统功能，满足多样化需求
- **技术方向**：
  - 完善 `app/api/controller/OAuth.go`，支持更多 OAuth2.0 服务
  - 扩展 `app/model`，支持第三方登录用户信息存储
  - 提供配置界面，简化第三方服务集成流程

### 插件与主题生态（短期目标）
- **插件系统**：
  - 设计钩子（Hook）机制，允许插件在核心流程中插入自定义逻辑（如请求处理、数据存储前后）
  - 开发插件管理接口，支持插件安装、启用、禁用、卸载全生命周期管理
  - 提供基础的插件开发 SDK 与文档，标准化插件目录结构与配置规范

- **主题定制**：
  - 规范前端主题开发标准，支持模板文件与静态资源的模块化组织
  - 实现主题切换功能，允许通过后台界面一键切换前端/后台主题
  - 建立基础的主题市场接口，支持主题下载、预览与更新

- **自动更新机制**：
  - 开发版本检测接口，定期检查核心系统、插件、主题的更新
  - 实现一键升级功能，支持断点续传与版本回滚，保障更新安全性

### 核心能力增强（中期目标）

#### 安全体系升级
- **操作安全加固**：
  - 敏感操作二次验证全覆盖：除密码修改、数据删除外，新增用户角色变更、支付配置修改、批量数据导出等操作增加短信/邮箱验证，整合消息通知中心实现多渠道验证
  - 操作日志审计系统：记录所有敏感操作的完整链路（操作人、IP、设备、时间、操作内容），支持日志溯源与异常行为分析
  - 防暴力破解机制：登录、API 调用等场景引入动态验证码（图形/短信），连续失败后临时锁定账号
  - 行为基线分析：建立正常操作行为模型，自动识别异常操作（如异地登录、非常规操作序列）
  - 实时入侵检测：基于 WAF 规则拦截可疑请求，结合异常行为分析触发告警

- **应急响应机制**：
  - 支持一键冻结异常账号、临时关闭敏感接口，提供安全事件处理流程模板
  - 整合消息通知中心，实时通知管理员异常事件（如账号被锁定、接口被禁用等）

- **合规性支持**：
  - 数据脱敏功能：对日志、报表中的敏感信息（如手机号显示为 138****5678）自动脱敏
  - 操作留痕合规：满足 GDPR 等法规要求，记录数据访问、修改、删除的完整审计日志
  - 数据留存管理：按法规要求配置数据保存期限，自动清理过期数据

- **数据安全防护**：
  - 实现数据传输全链路加密（HTTPS 强制启用、API 通信签名机制升级）
  - 敏感数据存储加密：用户手机号、邮箱等信息采用非对称加密算法存储，在 model/users.go 中扩展加密字段处理逻辑
  - 定期安全扫描：集成漏洞扫描工具接口，自动检测 SQL 注入、XSS 等常见安全风险，生成安全报告
  - 完善的备份与恢复机制：支持定时全量备份+增量备份，备份文件加密存储，提供一键恢复与时间点恢复功能

#### 权限与内容管理
- **权限系统深化**：
  - 完善 RBAC 权限模型，支持细粒度操作权限与数据权限控制
  - 用户组层级关系（如父组继承、子组权限隔离），支持嵌套角色配置
  - 实现权限项的 "允许/拒绝" 双向控制，解决复杂场景下的权限冲突
  - 数据权限细粒度控制：支持按部门/角色/用户维度过滤数据
  - 敏感操作二次验证（如短信、邮箱验证），提升系统安全性

- **内容管理升级**：
  - 集成支持 Markdown 与富文本双模式的编辑器，支持一键切换
  - 多媒体插入（本地/云存储图片、视频、音频）、表格编辑、代码块高亮等功能
  - 实现内容版本管理，支持历史版本回溯与对比
  - 新增自定义内容模型功能，允许用户通过后台配置非结构化数据类型
  - 内容定时发布：支持设置发布时间、过期时间，自动执行发布/下架操作
  - 内容关联推荐：基于标签关联、用户行为分析，自动推荐相关内容

#### 用户体验与性能优化
- **社交化功能集成**：
  - 第三方登录扩展：在现有账号体系基础上，新增微信、QQ、GitHub 等 OAuth2.0 登录方式
  - 用户互动功能：支持用户间消息私信、内容评论/点赞/收藏，关联积分体系实现互动激励
  - 个人中心升级：整合用户资料、权限范围、消息通知等功能，提供个性化设置入口

- **性能与架构扩展性优化**：
  - 扩展 Redis 集群支持，优化缓存策略，解决缓存穿透、雪崩问题
  - 实现数据库读写分离与分库分表，支持大数据量场景
  - 引入分布式限流机制，抵御分布式攻击，提升系统整体扩展性

### 生态与商业化支持（长期目标）

#### 开发者生态建设
- **开发者平台**：
  - 完善插件/主题开发者中心：提供完整的 API 文档、高级 SDK 下载、专业调试工具、丰富的示例项目
  - 建立开发者认证体系：通过技能认证分级，优质开发者可获得更多曝光资源和商业机会
  - 构建技术社区：建立官方网站/问答平台，促进开发者交流与问题解决，形成活跃的开发者生态

#### 应用市场与服务
- **插件商城**：
  - 建立成熟的插件市场平台，整合社区贡献和官方认证的插件，支持插件开发者与用户互动
  - 完善插件审核机制，确保插件质量、安全性和兼容性，提供插件评分和评论系统
  - 提供插件统计分析功能，帮助开发者了解插件使用情况，支持插件商业化变现

- **主题商城**：
  - 建立成熟的主题市场平台，整合社区贡献和官方认证的主题，支持主题开发者与用户互动
  - 完善主题审核机制，确保主题质量、安全性和兼容性，提供主题预览和试用功能
  - 提供主题统计分析功能，帮助用户了解主题使用情况，支持主题商业化变现

- **商业化服务**：
  - 提供专业版与企业版功能，包括但不限于定制化开发、技术支持、咨询服务等
  - 建立客户关系管理（CRM）系统，跟踪客户需求、提供解决方案