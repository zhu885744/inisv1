## inis

一款基于go语言开发的强大的通用api系统
基于 [Gin](https://gin-gonic.com/zh-cn/) 二次开发，数据库基于 [Gorm](https://gorm.io/) ，设计风格参考了 [ThinkPHP 6](https://www.kancloud.cn/manual/thinkphp6_0/1037479)

## 特点和功能
- 毫秒级响应
- 内置大量基础功能

## 配置文件
> 配置文件在 `config` 目录下

## 运行
> 运行前请先安装 [Go](https://golang.org/dl/) ，然后在项目根目录下执行 `go run main.go` 即可   
> 如需后台运行，可以使用 `go build -ldflags -H=windowsgui` 命令编译，[bee](https://github.com/beego/bee) 工具也可以使用 `bee pack -ba="-ldflags -H=windowsgui"` 命令打包

## 打包
> 部署前请先安装 [Go](https://golang.org/dl/) ，然后在项目根目录下双击 `build.bat` 即可，编译完成后会生成一个的可执行文件，将其放到服务器上即可

## 未来规划
inis 正在持续扩展中，计划新增以下关键功能：

## 核心能力升级

### 动态数据验证系统：
基于现有params参数校验逻辑（如app/api/controller/upgrade.go），开发可配置的验证规则引擎，支持 JSON Schema 定义规则，并提供多语言错误提示（适配国际化需求）。

### 消息通知中心：
整合现有短信、邮件功能，新增 WebSocket 实时通知（规划中），支持消息模板管理、发送状态追踪和重试机制，可应用于订单提醒、系统告警等场景。

### 高级文件管理增强：
在分片上传、断点续传（规划中）基础上，增加病毒扫描（集成 ClamAV）、文件权限控制（基于用户角色）、生命周期管理（自动清理过期文件）。

## 架构与性能优化

### 分布式部署支持：
引入服务注册与发现（如 Consul）、负载均衡（如 Nginx/Traefik），将单实例应用拆分为 API 服务、文件服务、通知服务等微服务，通过 gRPC 通信。

### 数据库扩展：
实现读写分离（主库写入、从库查询）、分库分表（基于 ShardingSphere），解决大数据量下的性能瓶颈；引入时序数据库（如 InfluxDB）存储监控指标（如system接口的内存、CPU 数据）。

### 缓存策略升级：
在现有内存缓存基础上，扩展 Redis 集群支持，实现热点数据（如文章列表、用户权限）自动缓存与失效，引入布隆过滤器解决缓存穿透问题。

## 场景化模块深化

### 内容管理增强：
实现 AI 辅助审核（图片 OCR 识别、文本违规检测）、个性化推荐（基于用户行为分析），结合 GraphQL 接口（规划中）提供灵活的数据查询能力。

## 数据传输与存储安全

### 敏感数据加密存储：
对用户密码（目前未体现加密逻辑）采用 bcrypt 或 Argon2 算法加盐哈希存储；对手机号、邮箱等敏感信息，使用 AES-256 加密后存入数据库，密钥通过环境变量或加密机管理。

### API 签名防篡改增强：
在现有Signature签名机制（app/facade/comm.go）基础上，增加请求体哈希校验（如 SHA-256），并对签名有效期进行限制（如 5 分钟内有效），防止重放攻击。

## 请求防护与限流

### 分布式限流：
现有qps.go中间件为单实例限流，可引入 Redis 实现分布式令牌桶，避免单机限流被绕过（如通过多 IP 分布式攻击）。

### WAF 规则集成：
增加请求参数过滤，拦截 SQL 注入（如检测union select等关键字）、XSS 攻击（如过滤<script>标签）、命令注入等常见攻击，可基于gin中间件实现规则拦截。

### CSRF 防护：
对非 GET 请求（如 POST/PUT）增加 CSRF Token 验证，在用户登录时生成 Token 并存入 Cookie，请求时需在 Header 或表单中携带，与服务端校验一致。

## 权限与访问控制

### 细粒度权限校验：
现有rule.go中间件基于路由规则校验，可补充数据级权限控制（如用户只能操作自己的文章），在model/Article.go等模型中增加所有者校验逻辑。

### 敏感操作二次验证：
对修改密码、删除数据等高危操作，增加短信验证码或邮箱验证，结合未来的 “消息通知中心” 实现多渠道验证。

### IP 动态黑名单：
在ip-black.go基础上，增加动态封禁逻辑（如连续 5 次登录失败的 IP 临时封禁 10 分钟），并定期清理过期黑名单。

## 更新日志
[1.0.0]更新内容如下【开发中】
- 重构：全新的管理后台主题
- 新增：阿里云号码验证短信方式
- 新增：消息通知api（整合短信、邮件等渠道）
- 新增：高级文件管理api（分片上传、断点续传）
- 新增：大量api接口
- 新增：相册接口
- 新增：又拍云存储
- 新增：余额和积分的增删改查接口
- 新增：余额和积分的变动逻辑，增加限额、类型等控制
- 新增：用户相关操作中添加余额 / 积分变动的逻辑
- 优化：
- 优化：去除inis社区账号绑定
- 优化：多角色权限细化
- 修复：大量的已知bug