import{d as s,J as a,h as t,m as e,C as n}from"./1766296936.element-plus.js";import{a as l,n as i}from"./1766296936.index.js";import{R as o,y as c,w as r,an as u,o as d,c as m,l as p,G as g,a as f,s as h,$ as v,a0 as y,F as x}from"./1766296936.@vue.js";const b={class:"card mb-3"},_={class:"card-body"},I={class:"text-muted text-uppercase mt-0"},P={class:"d-inline-flex align-items-center"},k={class:"m-b-20"},w={class:"text-muted ms-1"},A={__name:"api-key",setup(A,{expose:E}){const Y=o({struct:{},status:{finish:!1,active:!1,dialog:!1,loading:!0}});c(async()=>{await K.init()});const K={init:async()=>{Y.status.finish=!1,Y.status.loading=!0;const{code:s,data:a}=await l.get("/api/config/one",{key:"SYSTEM_API_KEY"});Y.status.loading=!1,200===s&&(Y.struct=a,Y.status.finish=!0)},show(){if(!Y.status.finish)return i.warn("API KEY配置获取失败，无法进行配置！");Y.status.dialog=!0},change:async s=>{const{code:a,msg:t}=await l.post("/api/config/save",{key:"SYSTEM_API_KEY",value:s?1:0});200!==a&&(Y.status.active=!s,i.error(t))}};return r(()=>Y.struct,()=>{Y.status.active=1===parseInt(Y.struct.value)},{deep:!0}),E({init:K.init}),(l,i)=>{const o=u("i-svg"),c=s,r=a,A=t,E=e,V=n;return d(),m(x,null,[p((d(),m("div",b,[f("div",_,[h(o,{name:"security-1",size:"60px",color:"rgb(var(--assist-color))",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),f("h6",I,[h(c,{placement:"top"},{content:v(()=>[...i[4]||(i[4]=[f("strong",{class:"text-danger"},"风险操作！此功能不懂请勿开启！",-1),f("br",null,null,-1),y(" ● 开启之后，所有的API均需要在请求头中提交 ",-1),f("strong",{class:"text-danger"},"i-api-key=密钥",-1),y(" 方能使用！",-1),f("br",null,null,-1),y(" ● 于此同时API安全性将提升90%，剩下10%取决于你的密钥复杂度和对手的能力强弱！ ",-1)])]),default:v(()=>[f("span",P,[h(o,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),i[5]||(i[5]=f("span",{class:"ms-1"},"API KEY",-1))])]),_:1})]),f("h2",k,[h(r,{modelValue:g(Y).status.active,"onUpdate:modelValue":i[0]||(i[0]=s=>g(Y).status.active=s),onChange:K.change,disabled:!g(Y).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),i[7]||(i[7]=f("span",{class:"badge bg-primary font-white"}," +90% ",-1)),f("span",w,[i[6]||(i[6]=y(" 安全性提升，",-1)),f("span",{onClick:i[1]||(i[1]=s=>K.show()),class:"text-dark pointer"},"点我查看")])])])),[[V,g(Y).status.loading]]),h(E,{modelValue:g(Y).status.dialog,"onUpdate:modelValue":i[3]||(i[3]=s=>g(Y).status.dialog=s),class:"custom",draggable:"","close-on-click-modal":!1},{header:v(()=>[...i[8]||(i[8]=[f("strong",{class:"flex-center"},"配置",-1)])]),default:v(()=>[...i[9]||(i[9]=[f("p",{class:"my-1"},"● API KEY 不是什么很NB的技术，却能大大提高的接口安全",-1),f("p",{class:"my-1"},"● 正常来说不开启也没关系，因为除此之外还有QPS限流器在帮你拦截异常流量",-1),f("p",{class:"my-1"},"● 但是如果您开启了API KEY，在使用其它主题的时候，需要按照要求配置密钥到您的主题中，否则主题会拿不到任何数据",-1)])]),footer:v(()=>[h(A,{onClick:i[2]||(i[2]=s=>g(Y).status.dialog=!1)},{default:v(()=>[...i[10]||(i[10]=[y(" 取 消 ",-1)])]),_:1})]),_:1},8,["modelValue"])],64)}}};export{A as _};
