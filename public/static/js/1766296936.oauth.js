import{b as s,a as o,n as t,c as e,u as r}from"./1766296936.index.js";import{b as i}from"./1766296936.vue-router.js";import{R as a,y as n,an as m,o as c,c as l,G as p,a as j,s as d,q as u,i as f}from"./1766296936.@vue.js";import"./1766296936.element-plus.js";import"./1766296936.lodash-es.js";import"./1766296936.@element-plus.js";import"./1766296936.@popperjs.js";import"./1766296936.@ctrl.js";import"./1766296936.dayjs.js";import"./1766296936.crypto-js.js";import"./1766296936.async-validator.js";import"./1766296936.memoize-one.js";import"./1766296936.normalize-wheel-es.js";import"./1766296936.@floating-ui.js";import"./1766296936.lscache.js";import"./1766296936.axios.js";import"./1766296936.notyf.js";import"./1766296936.pinia.js";import"./1766296936.vue-demi.js";import"./1766296936.lottie-web.js";import"./1766296936.bootstrap.js";import"./1766296936.plyr.js";import"./1766296936.rangetouch.js";import"./1766296936.loadjs.js";import"./1766296936.@fancyapps.js";import"./1766296936.highlight.js.js";import"./1766296936.@howdyjs.js";const h={class:"container-fluid container-box"},v={key:0,class:"card card-body"},g={class:"d-flex justify-content-center align-items-center"},y={class:"d-flex justify-content-center mt-2"},b={class:"font-14"},k={__name:"oauth",setup(k){const x=i(),w={comm:s()},I=a({second:5,close:!1,timer:null}),_=async()=>{var s;const{code:i,msg:a,data:n}=await o.post("/api/comm/check-token",{},{headers:{Authorization:x.params.token}});if(200!==i)return t.error(a);e.set("user-info",n.user,10),r.set.cookie((null==(s=null==globalThis?void 0:globalThis.inis)?void 0:s.token_name)||"INIS_LOGIN_TOKEN",x.params.token,604800),w.comm.login.finish=!0,w.comm.login.user=n.user;I.close=!0,I.timer=setInterval(()=>{I.second--,0===I.second&&(I.close=!1,clearInterval(I.timer),window.close())},1e3)};return n(()=>{_()}),(s,o)=>{const t=m("i-svg");return c(),l("div",h,[p(I).close?(c(),l("div",v,[j("div",g,[d(t,{name:"!",size:"25px",color:"var(--el-color-success)"}),o[0]||(o[0]=j("strong",{class:"font-16 ms-1"},"登录成功！",-1))]),j("div",y,[j("strong",b,u(p(I).second)+"s 后自动关闭当前窗口！",1)])])):f("",!0)])}}};export{k as default};
