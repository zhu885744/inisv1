import{d as a,H as l,e,f as s,h as t,m as o,D as n}from"./1766310517.element-plus.js";import{a as c,c as u,n as i}from"./1766310517.index.js";import{R as d,y as r,an as m,o as p,c as b,l as v,G as f,a as h,s as g,$ as w,a0 as y,F as j,g as x,f as V,q as k}from"./1766310517.@vue.js";const _={class:"card mb-3"},C={class:"card-body"},M={class:"text-muted text-uppercase mt-0"},T={class:"d-inline-flex align-items-center"},z={class:"m-b-20"},U={class:"text-muted"},E={class:"row"},L={class:"col-md-6"},H={class:"form-group mb-3"},R={class:"form-label"},A={class:"font-13"},I={class:"text-muted float-end"},q={class:"col-md-6"},D={class:"form-group mb-3"},F={class:"form-label"},G={class:"font-13"},J={class:"text-muted float-end"},N={class:"col-md-6"},O={class:"form-group mb-3"},S={class:"form-label"},$={class:"font-13"},B={class:"text-muted float-end"},K={class:"col-md-6"},P={class:"form-group mb-3"},Q={class:"form-label"},W={class:"font-13"},X={class:"text-muted float-end"},Y={__name:"article",setup(Y,{expose:Z}){const aa=d({cache:{name:"article",json:{editor:"tinymce"}},struct:{key:"ARTICLE",json:{comment:{allow:1,show:1},audit:1}},status:{finish:!1,loading:!0,dialog:!1},select:{editor:[{value:"tinymce",label:"富文本"},{value:"vditor",label:"Markdown"}],comment:{allow:[{value:1,label:"允许"},{value:0,label:"禁止"}],show:[{value:1,label:"显示"},{value:0,label:"隐藏"}]},audit:[{value:1,label:"开启",subtitle:"严格一点，防止乱搞"},{value:0,label:"关闭",subtitle:"宽松一点，方便用户"}]}});r(async()=>{await la.init()});const la={init:async()=>{la.cache(),aa.status.finish=!1,aa.status.loading=!0;const{code:a,data:l}=await c.get("/api/config/one",{key:"ARTICLE"});aa.status.loading=!1,200===a&&(aa.struct=l,aa.status.finish=!0)},change:async a=>{u.set(aa.cache.name,{...aa.cache.json,editor:a})},show(){if(!aa.status.finish)return i.warn("配置获取失败，无法进行配置！");aa.status.dialog=!0},save:async()=>{aa.status.wait=!0;const{code:a,msg:l}=await c.post("/api/config/save",{...aa.struct,json:JSON.stringify(aa.struct.json)});if(aa.status.wait=!1,200!==a)return i.error("保存失败："+l);aa.status.dialog=!1,u.set(aa.cache.name,aa.cache.json)},cache:(a=aa.cache.json)=>{u.has(aa.cache.name)?aa.cache.json=u.get(aa.cache.name):u.set(aa.cache.name,a)}};return Z({init:la.init}),(c,u)=>{const i=m("i-svg"),d=a,r=l,Y=e,Z=s,ea=t,sa=o,ta=n;return p(),b(j,null,[v((p(),b("div",_,[h("div",C,[g(i,{name:"editor",color:"rgb(var(--assist-color))",size:"43px",class:"position-absolute opacity-25",style:{right:"2rem"}}),h("h6",M,[g(d,{placement:"top"},{content:w(()=>[...u[9]||(u[9]=[y(" ● Markdown编辑器：Vditor支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。",-1),h("br",null,null,-1),y(" ● 富文本编辑器：TinyMCE是一个基于浏览器的所见即所得富文本编辑器，用于编辑HTML文档。",-1),h("br",null,null,-1)])]),default:w(()=>[h("span",T,[g(i,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),u[10]||(u[10]=h("span",{class:"ms-1"},"文章",-1))])]),_:1})]),h("h2",z,[g(r,{modelValue:f(aa).cache.json.editor,"onUpdate:modelValue":u[0]||(u[0]=a=>f(aa).cache.json.editor=a),onChange:la.change,disabled:!f(aa).status.finish,"active-value":"tinymce","inactive-value":"vditor","active-text":"富文本","inactive-text":"Markdown"},null,8,["modelValue","onChange","disabled"])]),u[12]||(u[12]=h("span",{class:"badge bg-success font-white"}," 更多 ",-1)),h("span",U,[u[11]||(u[11]=y(" 其它配置信息，",-1)),h("span",{onClick:u[1]||(u[1]=a=>la.show()),class:"text-dark pointer"},"点我配置")])])])),[[ta,f(aa).status.loading]]),g(sa,{modelValue:f(aa).status.dialog,"onUpdate:modelValue":u[8]||(u[8]=a=>f(aa).status.dialog=a),class:"custom",draggable:"","close-on-click-modal":!1},{header:w(()=>[...u[13]||(u[13]=[h("strong",{class:"flex-center"},"文章配置",-1)])]),default:w(()=>[h("div",E,[h("div",L,[h("div",H,[h("label",R,[g(d,{placement:"top"},{content:w(()=>[...u[14]||(u[14]=[y(" ● Markdown编辑器：Vditor支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。",-1),h("br",null,null,-1),y(" ● 富文本编辑器：TinyMCE是一个基于浏览器的所见即所得富文本编辑器，用于编辑HTML文档。",-1),h("br",null,null,-1)])]),default:w(()=>[h("span",null,[g(i,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),u[15]||(u[15]=h("span",{class:"ms-1"},"编辑器：",-1))])]),_:1})]),g(Z,{modelValue:f(aa).cache.json.editor,"onUpdate:modelValue":u[2]||(u[2]=a=>f(aa).cache.json.editor=a),class:"d-block custom font-13",placeholder:"请选择"},{default:w(()=>[(p(!0),b(j,null,x(f(aa).select.editor,a=>(p(),V(Y,{key:a.value,label:a.label,value:a.value},{default:w(()=>[h("span",A,k(a.label),1),h("small",I,k(a.value),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])]),h("div",q,[h("div",D,[h("label",F,[g(d,{content:"用户发布的文章，是否需要审核",placement:"top"},{default:w(()=>[h("span",null,[g(i,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),u[16]||(u[16]=h("span",{class:"ms-1"},"审核：",-1))])]),_:1})]),g(Z,{modelValue:f(aa).struct.json.audit,"onUpdate:modelValue":u[3]||(u[3]=a=>f(aa).struct.json.audit=a),class:"d-block custom font-13",placeholder:"请选择"},{default:w(()=>[(p(!0),b(j,null,x(f(aa).select.audit,a=>(p(),V(Y,{key:a.value,label:a.label,value:a.value},{default:w(()=>[h("span",G,k(a.label),1),h("small",J,k(a.subtitle),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])]),h("div",N,[h("div",O,[h("label",S,[g(d,{content:"是否允许用户评论",placement:"top"},{default:w(()=>[h("span",null,[g(i,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),u[17]||(u[17]=h("span",{class:"ms-1"},"允许评论：",-1))])]),_:1})]),g(Z,{modelValue:f(aa).struct.json.comment.allow,"onUpdate:modelValue":u[4]||(u[4]=a=>f(aa).struct.json.comment.allow=a),class:"d-block custom font-13",placeholder:"请选择"},{default:w(()=>[(p(!0),b(j,null,x(f(aa).select.comment.allow,a=>(p(),V(Y,{key:a.value,label:a.label,value:a.value},{default:w(()=>[h("span",$,k(a.label),1),h("small",B,k(a.value),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])]),h("div",K,[h("div",P,[h("label",Q,[g(d,{content:"是否显示评论",placement:"top"},{default:w(()=>[h("span",null,[g(i,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),u[18]||(u[18]=h("span",{class:"ms-1"},"显示评论：",-1))])]),_:1})]),g(Z,{modelValue:f(aa).struct.json.comment.show,"onUpdate:modelValue":u[5]||(u[5]=a=>f(aa).struct.json.comment.show=a),class:"d-block custom font-13",placeholder:"请选择"},{default:w(()=>[(p(!0),b(j,null,x(f(aa).select.comment.show,a=>(p(),V(Y,{key:a.value,label:a.label,value:a.value},{default:w(()=>[h("span",W,k(a.label),1),h("small",X,k(a.value),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])])])]),footer:w(()=>[g(ea,{onClick:u[6]||(u[6]=a=>f(aa).status.dialog=!1)},{default:w(()=>[...u[19]||(u[19]=[y("取 消",-1)])]),_:1}),g(ea,{onClick:u[7]||(u[7]=a=>la.save()),loading:f(aa).status.wait},{default:w(()=>[...u[20]||(u[20]=[y("保 存",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"])],64)}}};export{Y as _};
