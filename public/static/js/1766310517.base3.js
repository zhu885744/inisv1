/* empty css                    */import{j as e,w as s,a as t,k as n,l as o,h as l,m as a,n as i,q as r,o as c,p as d,r as u}from"./1766310517.element-plus.js";import{c as m,u as p,a as g,n as v,b as f,l as h,p as y,_ as b}from"./1766310517.index.js";import{M as x}from"./1766310517.markdown-it.js";import{R as w,y as k,an as _,o as j,c as z,G as L,s as C,i as T,f as H,$ as E,a as q,q as V,a0 as M,T as S,F as $,j as A,g as D,h as F,D as Y,w as I}from"./1766310517.@vue.js";import{u as O}from"./1766310517.vue-router.js";import{_ as P}from"./1766310517.page.js";import"./1766310517.lodash-es.js";import"./1766310517.@element-plus.js";import"./1766310517.@popperjs.js";import"./1766310517.@ctrl.js";import"./1766310517.dayjs.js";import"./1766310517.crypto-js.js";import"./1766310517.async-validator.js";import"./1766310517.memoize-one.js";import"./1766310517.normalize-wheel-es.js";import"./1766310517.@floating-ui.js";import"./1766310517.lscache.js";import"./1766310517.axios.js";import"./1766310517.notyf.js";import"./1766310517.pinia.js";import"./1766310517.vue-demi.js";import"./1766310517.lottie-web.js";import"./1766310517.bootstrap.js";import"./1766310517.plyr.js";import"./1766310517.rangetouch.js";import"./1766310517.loadjs.js";import"./1766310517.@fancyapps.js";import"./1766310517.highlight.js.js";import"./1766310517.@howdyjs.js";import"./1766310517.entities.js";import"./1766310517.uc.micro.js";import"./1766310517.mdurl.js";import"./1766310517.linkify-it.js";const U={key:0,class:"wh-30px position-relative upgrade-system"},G={class:"font-14"},N={class:"me-1"},W={class:"me-1"},B={key:0},K={key:0,class:"container-xxl mt-2 markdown"},R=["innerHTML"],X={key:1},J={class:"card radius-10"},Q={class:"card-body p-2"},Z={class:"card radius-10"},ee={class:"card-body p-2"},se={key:0,class:"modal-footer d-flex justify-content-center"},te={__name:"system",setup(i){const r=w({item:{tabs:"wait",dialog:!1},loading:{finish:!1,upgrade:!1},lottie:{show:!1,play:!1},struct:{version:null},version:null,select:{progress:[{value:"design",label:"设计"},{value:"dev",label:"开发"},{value:"test",label:"测试"},{value:"pro",label:"正式"},{value:"abandon",label:"停止维护"}]},user:m.get("user-info")||{}});k(async()=>{var e,s,t;!0===(null==(t=null==(s=null==(e=r.user)?void 0:e.result)?void 0:s.auth)?void 0:t.all)&&await c.check()});const c={check:async()=>{var e,s,t;await c.next(),await c.version(),p.compare.version(null==(e=r.struct)?void 0:e.version,r.version)&&(r.lottie.show=!0,(null==(s=r.struct)?void 0:s.version)!==(null==(t=m)?void 0:t.get("system-version-ignore"))&&(r.lottie.play=!0))},version:async()=>{const e="system-version-local";if(m.has(e))return void(r.version=m.get(e));const{code:s,data:t}=await g.get("/dev/info/version");200===s&&(r.version=null==t?void 0:t.inis,m.set(e,null==t?void 0:t.inis,inis.cache))},next:async()=>{const e="system-version-next";if(m.has(e))return void(r.struct=m.get(e));const{data:s}=await g.get("/inis/system-version/next",{progress:"pro"});r.struct=s,m.set(e,s,inis.cache)},progress:e=>{const s=r.select.progress.find(s=>s.value===e);return s?s.label:""},markdown:e=>(new x).render(e),upgrade:async()=>{var e;m.del("system-version-local"),r.loading.upgrade=!0;const{code:s,msg:t}=await g.post("/api/upgrade/system",{id:null==(e=r.struct)?void 0:e.id});if(200!==s)return r.loading.upgrade=!1,v.error(t);r.lottie.play=!1,r.loading.finish=!0,r.loading.upgrade=!1,v.success("升级成功！")},ignore:async()=>{var e;m.set("system-version-ignore",null==(e=r.struct)?void 0:e.version,10080),r.lottie.play=!1,r.item.dialog=!1},close:()=>{r.loading.finish&&(r.lottie.show=!1)}};return(i,d)=>{const u=_("i-lottie"),m=_("i-svg"),g=e,v=s,f=t,h=n,y=o,b=l,x=a;return j(),z($,null,[L(r).lottie.show?(j(),z("span",U,[C(u,{name:"bell",modelValue:L(r).lottie.play,"onUpdate:modelValue":d[0]||(d[0]=e=>L(r).lottie.play=e),onClick:d[1]||(d[1]=e=>L(r).item.dialog=!0),class:"lottie"},null,8,["modelValue"])])):T("",!0),(j(),H(S,{to:"body"},[C(x,{modelValue:L(r).item.dialog,"onUpdate:modelValue":d[5]||(d[5]=e=>L(r).item.dialog=e),class:"custom pt-0 pb-0","close-on-click-modal":!1,onClose:c.close},{header:E(()=>{var e,s;return[q("strong",G,[q("span",null,V(L(r).struct.title)+"：",1),q("span",N,V(null==(s=null==(e=L(r).struct.result)?void 0:e.theme)?void 0:s.title),1),q("span",W,V(c.progress(L(r).struct.progress))+"版本",1),q("span",null,V(L(r).struct.version),1)])]}),default:E(()=>[L(r).loading.finish?(j(),z("div",X,[C(g,{type:"success",closable:!1,center:"",class:"mb-3 box-shadow-light"},{title:E(()=>[C(m,{name:"!",size:"15px",color:"var(--el-color-success)"}),d[7]||(d[7]=q("span",{class:"ms-1"},"更新已完成，但还需要等待后续操作",-1))]),_:1}),C(y,{modelValue:L(r).item.tabs,"onUpdate:modelValue":d[2]||(d[2]=e=>L(r).item.tabs=e),id:"tabs-area",class:"tag"},{default:E(()=>[C(h,{name:"wait"},{label:E(()=>[...d[8]||(d[8]=[q("span",{class:"fw-bolder font-12"},"宝塔用户等两分钟",-1)])]),default:E(()=>[q("div",J,[q("div",Q,[d[9]||(d[9]=q("p",null,"如果您是宝塔用户，且满足以下条件，只需要等待两分钟即可",-1)),d[10]||(d[10]=q("p",null,"1、【次要】使用了 Go项目 部署的本程序",-1)),d[11]||(d[11]=q("p",null,"2、【重要】勾选了 开机启动（默认守护进程2分钟）",-1)),C(f,{src:"/assets/imgs/png/upgrade-1.png",class:"w-100"})])])]),_:1}),C(h,{name:"worry"},{label:E(()=>[...d[12]||(d[12]=[q("span",{class:"fw-bolder font-12"},"急！一刻都不想等",-1)])]),default:E(()=>[q("div",Z,[q("div",ee,[d[13]||(d[13]=q("p",null,"如果您比较着急，希望马上启动本程序，按照以下步骤操作即可",-1)),d[14]||(d[14]=q("p",null,"1、找到本程序的启动按钮（windows系统双击可执行程序）",-1)),d[15]||(d[15]=q("p",null,"2、点击启动项目",-1)),C(f,{src:"/assets/imgs/png/upgrade-2.png",class:"w-100"})])])]),_:1})]),_:1},8,["modelValue"])])):(j(),z("div",B,[C(g,{type:"success",closable:!1,center:"",class:"box-shadow-light"},{title:E(()=>[C(m,{name:"!",size:"15px",color:"var(--el-color-success)"}),d[6]||(d[6]=q("span",{class:"ms-1"},"发现新的 inis 版本，是否立即更新？",-1))]),_:1}),L(p).is.empty(L(r).struct.content)?T("",!0):(j(),z("div",K,[C(v,{"max-height":"400px"},{default:E(()=>[q("div",{innerHTML:c.markdown(L(r).struct.content),class:"white-space-line"},null,8,R)]),_:1})]))]))]),footer:E(()=>[L(r).loading.finish?T("",!0):(j(),z("div",se,[C(b,{onClick:d[3]||(d[3]=e=>c.ignore()),disabled:L(r).loading.upgrade},{default:E(()=>[...d[16]||(d[16]=[M("忽略本次更新",-1)])]),_:1},8,["disabled"]),C(b,{onClick:d[4]||(d[4]=e=>c.upgrade()),loading:L(r).loading.upgrade},{default:E(()=>[M(V(L(r).loading.upgrade?"正在更新":"立即更新"),1)]),_:1},8,["loading"])]))]),_:1},8,["modelValue","onClose"])]))],64)}}},ne={class:"topnav"},oe={class:"container-fluid user-select-none"},le={class:"navbar navbar-dark navbar-expand-lg topnav-menu py-1"},ae={class:"collapse navbar-collapse justify-content-between"},ie={class:"d-flex align-items-center"},re=["innerHTML"],ce={class:"ms-1"},de={class:"d-flex flex-column align-items-end user-select-text me-2"},ue={key:0,class:"font-14 scale-90"},me={class:"badge item left bg-dark px-2 py-1",style:{color:"#fff"}},pe={class:"badge item right bg-warning px-2 py-1"},ge={key:1},ve={class:"d-lg-none d-black"},fe={class:"d-flex justify-content-between"},he={class:"font-14"},ye={key:0,class:"mx-2"},be={class:"d-block wh-30px"},xe={class:"d-flex flex-column"},we={class:"flex-center mb-3"},ke={key:0,class:"d-flex flex-column"},_e={class:"card card-body position-relative mb-0 nav-bg"},je={class:"d-flex"},ze={class:"d-flex align-items-center position-absolute",style:{top:"5px",left:"70px"}},Le={class:"text-dark font-15 fw-bolder"},Ce={class:"badge badge-outline-warning item right ms-1 scale-90"},Te={class:"mt-2 pt-1 mb-0 font-13"},He={class:"d-flex align-items-center"},Ee=["innerHTML"],qe={class:"font-14 fw-medium"},Ve={class:"flex-center"},Me={__name:"nav",setup(e){const s=O(),n={comm:f()},o=w({theme:"white",drawer:{show:!1,menu:!0},menu:[]});k(async()=>{o.menu=await h()}),A(async()=>{await l.getTheme()});const l={async getTheme(){let e=document.querySelector("body").getAttribute("inis-theme");p.is.empty(e)||(-1!==e.indexOf("white")?o.theme="white":o.theme="dark")},fn:e=>{o.drawer.show=!1,e()},push:e=>{o.drawer.show=!1,y(e)},empty:e=>p.is.empty(e),router:(e={})=>s.push(e)};return(e,s)=>{var a;const m=t,g=i,v=_("i-svg"),f=r,h=c,b=d,x=u;return j(),z($,null,[q("div",ne,[q("div",oe,[q("nav",le,[q("div",ae,[C(h,{class:"navbar-nav w-100 custom","unique-opened":!0,"menu-trigger":"hover",mode:"horizontal","background-color":"transparent"},{default:E(()=>[C(g,{index:"/"},{default:E(()=>[C(m,{onClick:s[0]||(s[0]=e=>L(y)("/")),src:`/assets/imgs/logo-${L(o).theme}.png`,style:{width:"100px"},class:"d-flex flex-center"},null,8,["src"])]),_:1}),C(g,{index:"home",onClick:s[1]||(s[1]=e=>L(y)("/admin"))},{default:E(()=>[...s[12]||(s[12]=[q("span",{class:"ms-1"},"控制台",-1)])]),_:1}),(j(!0),z($,null,D(L(o).menu,(e,s)=>(j(),H(f,{key:s,index:s.toString(),"show-timeout":"50","hide-timeout":"50"},{title:E(()=>[q("span",ie,[q("i",{innerHTML:e.icon,style:{"margin-top":"-2px"},class:"nav-icon"},null,8,re),q("span",ce,V(e.label),1)])]),default:E(()=>[(j(!0),z($,null,D(e.children,(e,s)=>(j(),H(g,{key:s,index:s.toString(),onClick:s=>e.fn()},{default:E(()=>[C(v,{name:e.icon,size:e.size,class:"me-1"},null,8,["name","size"]),M(" "+V(e.label),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1032,["index"]))),128))]),_:1}),C(h,{"unique-opened":!0,mode:"horizontal",class:"navbar-nav d-flex align-items-center justify-content-end w-100","background-color":"transparent"},{default:E(()=>[C(g,{index:"1"},{default:E(()=>[C(te)]),_:1}),C(f,{"show-timeout":"50","hide-timeout":"50",index:"login-user",class:"icon-none"},{title:E(()=>{var e,s,t,o,l,a;return[q("div",de,[L(p).is.empty(null==(e=n.comm.getLogin.user)?void 0:e.title)?(j(),z("strong",ge,V(null==(o=n.comm.getLogin.user)?void 0:o.nickname),1)):(j(),z("span",ue,[q("strong",me,V(null==(s=n.comm.getLogin.user)?void 0:s.nickname),1),q("span",pe,V(null==(t=n.comm.getLogin.user)?void 0:t.title),1)])),q("small",null,V(null==(l=n.comm.getLogin.user)?void 0:l.email),1)]),C(b,{src:null==(a=n.comm.getLogin.user)?void 0:a.avatar,shape:"square",size:"medium"},null,8,["src"])]}),default:E(()=>[C(g,{onClick:s[2]||(s[2]=e=>l.push({path:"/admin"})),index:"/admin"},{default:E(()=>[C(v,{name:"console",size:"16px",class:"me-1"}),s[13]||(s[13]=M(" 后台管理 ",-1))]),_:1}),C(g,{onClick:s[3]||(s[3]=e=>l.push({path:"/account/home"})),index:"/account/home"},{default:E(()=>[C(v,{name:"personal",size:"15px",class:"me-1"}),s[14]||(s[14]=M(" 用户中心 ",-1))]),_:1}),C(g,null,{default:E(()=>[C(v,{name:"logout",size:"16px",class:"me-1"}),q("span",{onClick:s[4]||(s[4]=e=>n.comm.logout("/")),class:"w-100"},"退出登录")]),_:1})]),_:1})]),_:1})])]),q("nav",ve,[q("div",fe,[q("span",{onClick:s[5]||(s[5]=e=>L(o).drawer.show=!0),class:"wh-24px d-block ms-2"},[C(v,{name:"side",size:"22px",color:"rgb(var(--assist-color))"})]),q("small",he,V(n.comm.nav.title),1),n.comm.getLogin.finish?(j(),z("div",{key:1,onClick:s[6]||(s[6]=e=>L(y)({path:"/admin"})),class:"d-flex align-items-center justify-content-center",style:{"margin-top":"-8px"}},[q("span",be,[C(te)]),C(b,{src:null==(a=n.comm.getLogin.user)?void 0:a.avatar,size:26,class:"mx-2 mirror-scan"},null,8,["src"])])):(j(),z("span",ye,[C(v,{name:"user",size:"26px",color:"rgb(var(--assist-color))"})]))])])])]),C(x,{modelValue:L(o).drawer.show,"onUpdate:modelValue":s[11]||(s[11]=e=>L(o).drawer.show=e),direction:"ltr",size:"75%","show-close":!1,class:"custom side"},{header:E(()=>{var e,t,a,i;return[q("div",xe,[q("span",we,[C(m,{onClick:s[7]||(s[7]=e=>l.push("/")),src:`/assets/imgs/logo-${L(o).theme||"white"}.png`,style:{width:"100px"},class:"d-flex flex-center"},null,8,["src"])]),n.comm.getLogin.finish?(j(),z("div",ke,[s[15]||(s[15]=q("p",{class:"mb-2 fw-medium font-14 d-flex align-items-center"},[q("span",{class:"me-1 w-2px h-16px bg-info radius-4"}),M(" 个人信息 ")],-1)),C(m,{src:"https://inis.cn/api/file/rand?name=imgs.txt&size=250x120",style:{height:"120px","border-radius":"6px 6px 0 0"},fit:"cover"}),q("div",_e,[q("div",je,[C(b,{src:null==(e=n.comm.getLogin.user)?void 0:e.avatar,size:50,class:"position-absolute avatar-shadow mirror-scan",style:{top:"-25px"},shape:"square"},null,8,["src"]),q("div",ze,[q("span",Le,V(null==(t=n.comm.getLogin.user)?void 0:t.nickname),1),q("span",Ce,V(null==(a=n.comm.getLogin.user)?void 0:a.title),1)]),q("p",Te,V((null==(i=n.comm.getLogin.user)?void 0:i.description)||"这个人很懒，什么都没留下！"),1)])])])):T("",!0)])]}),default:E(()=>[s[16]||(s[16]=q("p",{class:"fw-medium font-14 d-flex align-items-center mb-0"},[q("span",{class:"me-1 w-2px h-16px bg-info radius-4"}),M(" 导航菜单 ")],-1)),C(h,{class:"nav-bg my-1 custom","unique-opened":""},{default:E(()=>[(j(!0),z($,null,D(L(o).menu,(e,s)=>(j(),H(f,{key:s,index:e.name.toString(),"show-timeout":"50","hide-timeout":"50"},{title:E(()=>[q("span",He,[q("i",{innerHTML:e.icon,style:{"margin-top":"-2px"},class:"nav-icon"},null,8,Ee),q("span",{class:"ms-1",style:F(1===s?"margin-left: 1px !important":"")},V(e.label),5)])]),default:E(()=>[(j(!0),z($,null,D(e.children,(e,s)=>(j(),H(g,{key:s,index:e.path.toString(),onClick:s=>l.fn(e.fn())},{default:E(()=>[q("span",qe,V(e.label),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1032,["index"]))),128))]),_:1})]),footer:E(()=>[q("span",Ve,[q("span",{onClick:s[8]||(s[8]=e=>l.push({path:"/admin"})),class:"flex-center mx-1"},[C(v,{color:"rgb(var(--assist-color))",name:"console",size:"18px",class:"me-1"})]),q("span",{onClick:s[9]||(s[9]=e=>l.push({path:"/admin/account/home"})),class:"flex-center mx-1"},[C(v,{color:"rgb(var(--assist-color))",name:"personal",size:"18px",class:"me-1"})]),q("span",{onClick:s[10]||(s[10]=e=>n.comm.logout("/")),class:"flex-center mx-1"},[C(v,{color:"rgb(var(--assist-color))",name:"logout",size:"17px",class:"me-1"})])])]),_:1},8,["modelValue"])],64)}}},Se={ref:"pointer",id:"pointer"},$e={id:"background"},Ae={ref:"cover",class:"cover",style:{opacity:"1",transition:"all 1.5s ease 0s"}},De={id:"go-to-top",ref:"go-to-top",class:"d-none"},Fe={class:"flex-center p-0",type:"button"},Ye=b({__name:"beautify",setup(e){const{ctx:s,proxy:n}=Y(),o=Math.round((new Date).getTime()/1e3),l=w({cover:`https://api.inis.cc/api/file/random?name=cure&unix=${o}`});return A(()=>{const e=n.$refs.pointer,s=e.offsetWidth/2,t=(t,n)=>{e.style.transform=`translate(${t-s+1}px, ${(()=>{let e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e})()+n-s+1}px)`};document.querySelector("body").addEventListener("mousemove",e=>window.requestAnimationFrame(()=>{t(e.clientX,e.clientY)}));const o=document.querySelector("#loading-box");o&&setTimeout(()=>o.classList.add("loaded"),500);const l=n.$refs.cover;n.$refs["bg-img"],l.style.setProperty("opacity",0),l.style.setProperty("transition","all 1.5s ease 0s"),Boolean(window.navigator.userAgent.match(/AppWebKit.*Mobile.*/))&&(e.style.display="none"),window.onscroll=()=>{let[e,s]=[null,!0],t=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;const o=n.$refs["go-to-top"];o.style.setProperty("display",t>300?"block":"none","important"),o.addEventListener("click",()=>{s=!0,e=setTimeout(()=>{s&&p.to.scroll(0)},150)}),o.addEventListener("dblclick",()=>{clearTimeout(e),s=!1,p.to.scroll(l())});const l=()=>{let e=0;return e=document.body.clientHeight&&document.documentElement.clientHeight?document.body.clientHeight<document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight:document.body.clientHeight>document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-e}}}),(e,s)=>{const n=t,o=_("i-svg");return j(),z($,null,[q("div",Se,null,512),q("div",$e,[C(n,{src:"/assets/imgs/bg.webp",fit:"cover",style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0"}},{error:E(()=>[C(n,{src:L(l).cover,fit:"cover",style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0"}},null,8,["src"])]),_:1}),q("div",Ae,null,512)]),q("div",De,[q("button",Fe,[C(o,{name:"go-to-top",size:"30px"})])],512)],64)}}},[["__scopeId","data-v-f5f4ea0b"]]),Ie={id:"footer",class:"text-dark user-select-none footer-container"},Oe={class:"footer-row"},Pe=["href"],Ue=["href"],Ge={class:"footer__item","aria-label":"技术支持"},Ne={href:"https://github.com/zhu885744/inisv1",target:"_blank",rel:"noopener noreferrer",class:"footer__tech-link",title:"Typecho 官方网站"},We={href:"https://github.com/zhu885744/inis-admin",target:"_blank",rel:"noopener noreferrer",class:"footer__tech-link",title:"buyu 主题 GitHub 仓库"},Be={__name:"footer",setup(e){const s=w({year:{start:null,end:(new Date).getFullYear()},site:{show:!1,struct:{copy:{}}},version:{theme:inis.version,system:"3.0.0"}}),t=async()=>{const e="site-info";if(m.has(e))return void(s.site.struct=m.get(e));const{code:t,data:n}=await g.get("/api/config/one",{key:"SITE_INFO"});200===t&&(s.site.struct=n.json,m.set(e,n.json,inis.cache))},n=async()=>{const e="system-version-local";if(m.has(e))return void(s.version.system=m.get(e));const{code:t,data:n}=await g.get("/dev/info/version");200===t&&(s.version.system=null==n?void 0:n.inis,m.set(e,null==n?void 0:n.inis,inis.cache))},o=(e=Math.round(new Date/1e3))=>{const s=1e3*parseInt(e);return new Date(s).getFullYear()};return k(async()=>{await t(),await n()}),I(()=>s.site.struct,e=>{s.site.show=!p.is.empty(e)}),I(()=>s.site.struct,e=>{p.is.empty(null==e?void 0:e.date)||(s.year.start=o(null==e?void 0:e.date))}),(e,t)=>{var n,o,l,a,i,r,c,d;return j(),z("footer",Ie,[q("div",Oe,[q("div",null,"Copyright © "+V(L(s).year.start)+" ~ "+V(L(s).year.end)+" 版权所有",1),q("div",null,[q("a",{href:null==(o=null==(n=L(s).site.struct)?void 0:n.copy)?void 0:o.link,target:"_blank",class:"text-dark"},V((null==(a=null==(l=L(s).site.struct)?void 0:l.copy)?void 0:a.code)||"请在后台填写备案号"),9,Pe)]),q("div",null,[q("a",{href:null==(r=null==(i=L(s).site.struct)?void 0:i.police)?void 0:r.link,target:"_blank",class:"text-dark"},V((null==(d=null==(c=L(s).site.struct)?void 0:c.police)?void 0:d.code)||"请在后台填写公安备案备案号"),9,Ue)]),q("div",Ge,[t[0]||(t[0]=q("span",null,"Powered by ",-1)),q("a",Ne," inis v"+V(L(s).version.system),1),t[1]||(t[1]=q("span",null," | Theme by ",-1)),q("a",We," inis-admin v"+V(L(s).version.theme),1)])])])}}},Ke={__name:"base",setup:e=>(A(()=>{const e=document.querySelector("body");e.setAttribute("data-layout","topnav"),e.setAttribute("inis-theme","white"),e.classList.add("user-select-none");document.querySelector("#app").classList.add("admin")}),(e,s)=>{const t=_("router-view");return j(),z($,null,[C(Ye),C(Me),C(t),C(Be),C(P)],64)})};export{Ke as default};
