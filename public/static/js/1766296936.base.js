/* empty css                    */import{a as e,b as t,c as s,d as l,e as a,f as o,g as n,h as c}from"./1766296936.element-plus.js";import{_ as r,u as i,n as m,a as d}from"./1766296936.index.js";import{R as u,j as p,an as f,o as b,c as y,a as v,s as w,$ as h,G as g,F as x,D as _,y as V,w as j,g as k,f as E,q as z,a0 as q,i as U}from"./1766296936.@vue.js";import"./1766296936.lodash-es.js";import"./1766296936.@element-plus.js";import"./1766296936.@popperjs.js";import"./1766296936.@ctrl.js";import"./1766296936.dayjs.js";import"./1766296936.crypto-js.js";import"./1766296936.async-validator.js";import"./1766296936.memoize-one.js";import"./1766296936.normalize-wheel-es.js";import"./1766296936.@floating-ui.js";import"./1766296936.lscache.js";import"./1766296936.axios.js";import"./1766296936.notyf.js";import"./1766296936.pinia.js";import"./1766296936.vue-demi.js";import"./1766296936.vue-router.js";import"./1766296936.lottie-web.js";import"./1766296936.bootstrap.js";import"./1766296936.plyr.js";import"./1766296936.rangetouch.js";import"./1766296936.loadjs.js";import"./1766296936.@fancyapps.js";import"./1766296936.highlight.js.js";import"./1766296936.@howdyjs.js";const D={ref:"pointer",id:"pointer"},A={id:"background"},H={ref:"cover",class:"cover",style:{opacity:"1",transition:"all 1.5s ease 0s"}},T={id:"go-to-top",ref:"go-to-top",class:"d-none"},Q={class:"flex-center p-0",type:"button"},B=r({__name:"beautify",setup(t){const{ctx:s,proxy:l}=_(),a=Math.round((new Date).getTime()/1e3),o=u({cover:`https://api.inis.cc/api/file/random?name=cure&unix=${a}`});return p(()=>{const e=l.$refs.pointer,t=e.offsetWidth/2,s=(s,l)=>{e.style.transform=`translate(${s-t+1}px, ${(()=>{let e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e})()+l-t+1}px)`};document.querySelector("body").addEventListener("mousemove",e=>window.requestAnimationFrame(()=>{s(e.clientX,e.clientY)}));const a=document.querySelector("#loading-box");a&&setTimeout(()=>a.classList.add("loaded"),500);const o=l.$refs.cover;l.$refs["bg-img"],o.style.setProperty("opacity",0),o.style.setProperty("transition","all 1.5s ease 0s"),Boolean(window.navigator.userAgent.match(/AppWebKit.*Mobile.*/))&&(e.style.display="none"),window.onscroll=()=>{let[e,t]=[null,!0],s=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;const a=l.$refs["go-to-top"];a.style.setProperty("display",s>300?"block":"none","important"),a.addEventListener("click",()=>{t=!0,e=setTimeout(()=>{t&&i.to.scroll(0)},150)}),a.addEventListener("dblclick",()=>{clearTimeout(e),t=!1,i.to.scroll(o())});const o=()=>{let e=0;return e=document.body.clientHeight&&document.documentElement.clientHeight?document.body.clientHeight<document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight:document.body.clientHeight>document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-e}}}),(t,s)=>{const l=e,a=f("i-svg");return b(),y(x,null,[v("div",D,null,512),v("div",A,[w(l,{src:"/assets/imgs/bg.webp",fit:"cover",style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0"}},{error:h(()=>[w(l,{src:g(o).cover,fit:"cover",style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0"}},null,8,["src"])]),_:1}),v("div",H,null,512)]),v("div",T,[v("button",Q,[w(a,{name:"go-to-top",size:"30px"})])],512)],64)}}},[["__scopeId","data-v-560c28c0"]]),S={class:"container-fluid mt-5"},L={class:"card mt-3"},C={key:0,class:"card-body"},Y={class:"row my-2"},$={class:"col-md-6"},K={class:"form-group mb-3"},M={class:"form-label"},P={class:"font-13"},R={class:"text-muted float-end"},I={class:"col-md-6"},O={class:"form-group mb-3"},F={class:"form-label"},W={class:"font-13"},G={class:"text-muted float-end"},N={class:"row my-2"},X={class:"col-md-4"},J={class:"form-group mb-3"},Z={class:"form-label required"},ee={class:"col-md-4"},te={class:"form-group mb-3"},se={class:"form-label required"},le={class:"col-md-4"},ae={class:"form-group mb-3"},oe={class:"form-label required"},ne={class:"row my-2"},ce={class:"col-md-4"},re={class:"form-group mb-3"},ie={class:"form-label required"},me={class:"col-md-4"},de={class:"form-group mb-3"},ue={class:"form-label required"},pe={class:"col-md-4"},fe={class:"form-group mb-3"},be={class:"form-label required"},ye={class:"d-flex justify-content-center"},ve={key:1,class:"card-body"},we={class:"row my-2"},he={class:"col-md-4"},ge={class:"form-group mb-3"},xe={class:"form-label required"},_e={class:"col-md-4"},Ve={class:"form-group mb-3"},je={class:"form-label required"},ke={class:"col-md-4"},Ee={class:"form-group mb-3"},ze={class:"form-label required"},qe={class:"row my-2"},Ue={class:"col-md-6"},De={class:"form-group mb-3"},Ae={class:"form-label"},He={class:"col-md-6"},Te={class:"form-group mb-3"},Qe={class:"form-label required"},Be={class:"row my-2"},Se={class:"col-lg-12"},Le={class:"form-group mb-3"},Ce={class:"form-label"},Ye={class:"d-flex justify-content-center"},$e={key:2,class:"card-body"},Ke={class:"alert alert-primary pb-0",role:"alert"},Me={class:"d-flex justify-content-center my-3"},Pe={__name:"index",setup(e){const r=u({item:{active:1,DB_KEY:"DATABASE_STRUCT",connect:!1},struct:{type:"mysql",hostname:"localhost",hostport:3306,charset:"utf8mb4",prefix:"inis_",database:"",username:"",password:""},user:{account:null,password1:null,password2:null,nickname:null,email:null,description:"这个人很懒，什么都没有留下！"},select:{db:[{value:"mysql",label:"MySQL 数据库"}],charset:[{value:"utf8mb4",label:"支持4字节的Unicode字符，是MySQL 5.5.3及以上版本推荐使用的默认字符集。"},{value:"utf8",label:"支持3字节的Unicode字符，但无法正确存储一些特殊的Emoji表情符号。"},{value:"gb2312",label:"汉字编码标准。"},{value:"gbk",label:"扩展了gb2312字符集，支持更多汉字。"},{value:"latin1",label:"ISO-8859-1字符集，支持西欧语言。"}]},load:{connect:!1},retry:{count:1,time:2e3}});V(async()=>{i.has.session(r.item.DB_KEY)&&(r.struct=i.get.session(r.item.DB_KEY))});const p={connect:async()=>{if(i.is.empty(r.struct.hostname))return m.warn("数据库地址不能为空！");if(i.is.empty(r.struct.hostport))return m.warn("数据库端口不能为空！");if(i.is.empty(r.struct.database))return m.warn("数据库名称不能为空！");if(i.is.empty(r.struct.username))return m.warn("数据库用户名不能为空！");if(i.is.empty(r.struct.password))return m.warn("数据库密码不能为空！");r.load.connect=!0;const{code:e,msg:t}=await d.post("/dev/install/connect-db",r.struct);if(r.load.connect=!1,200!==e)return r.item.connect=!1,m.error(t);r.item.connect=!0,m.success("数据库连接成功！"),i.set.session(r.item.DB_KEY,r.struct)},initDB:async()=>{const{code:e,msg:t}=await d.post("/dev/install/init-db");200!==e&&(m.error(t),r.item.connect=!1)},createAdmin:async()=>{if(!r.item.connect)return m.warn("请先测试数据库连接！");if(i.is.empty(r.user.account))return m.warn("帐号不能为空！");if(i.is.empty(r.user.email))return m.warn("邮箱不能为空！");if(!i.is.email(r.user.email))return m.warn("邮箱格式不正确！");if(i.is.empty(r.user.password1))return m.warn("密码不能为空！");if(i.is.empty(r.user.password2))return m.warn("请再次输入密码！");if(r.user.password1!==r.user.password2)return m.warn("两次输入的密码不一致！");r.user.password=r.user.password2;try{const{code:e,msg:t}=await d.post("/dev/install/create-admin",r.user);if(500===e)return p.retry();if(200!==e)return m.error(t);delete r.user.password1,delete r.user.password2,m.success("创建管理员成功！"),i.clear.session(r.item.DB_KEY),await p.lock(),await p.next(3)}catch(e){await p.retry()}},retry:async()=>{if(r.retry.count>5)return m.error("安装失败，请联系兔子，QQ：97783391",{duration:6e5});await p.sleep(r.retry.time),await p.connect(),await p.sleep(r.retry.time),await p.initDB(),await p.sleep(r.retry.time),await p.createAdmin(),r.retry.count++},sleep:(e=1e3)=>new Promise(t=>setTimeout(t,e)),lock:async()=>{const{code:e,msg:t}=await d.post("/dev/install/lock");if(200!==e)return m.error(t)},next:async(e=1)=>{if(2===e){if(!r.item.connect)return m.warn("请先测试数据库连接！");await p.initDB()}r.item.active=e},prev:(e=1)=>{r.item.active=e},window:(e="/",t="_self")=>window.open(e,t),copy:(e=null,t="复制成功！")=>{if(!i.is.empty(e))return i.set.copy.text(e),i.is.empty(t)?void 0:m.info(t)}};return j(()=>r.user,(e={})=>{r.user.account=e.account.replace(/\s+/g,"")},{deep:!0}),(e,i)=>{const m=t,d=s,u=f("i-svg"),_=l,V=a,j=o,D=n,A=c;return b(),y("div",S,[w(d,{active:g(r).item.active,simple:""},{default:h(()=>[w(m,{title:"配置数据库"}),w(m,{title:"创建管理员"}),w(m,{title:"完成"})]),_:1},8,["active"]),v("div",L,[1===g(r).item.active?(b(),y("div",C,[v("div",Y,[v("div",$,[v("div",K,[v("label",M,[w(_,{content:"数据库的类型，目前只支持MySQL",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[25]||(i[25]=v("span",{class:"ms-1"},"类型：",-1))])]),_:1})]),w(j,{modelValue:g(r).struct.type,"onUpdate:modelValue":i[0]||(i[0]=e=>g(r).struct.type=e),placeholder:"请选择方式",class:"d-block custom font-13"},{default:h(()=>[(b(!0),y(x,null,k(g(r).select.db,e=>(b(),E(V,{key:e.value,label:e.label,value:e.value},{default:h(()=>[v("span",P,z(e.label),1),v("small",R,z(e.value),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])]),v("div",I,[v("div",O,[v("label",F,[w(_,{content:"推荐用默认的 utf8mb4",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[26]||(i[26]=v("span",{class:"ms-1"},"字符集：",-1))])]),_:1})]),w(j,{modelValue:g(r).struct.charset,"onUpdate:modelValue":i[1]||(i[1]=e=>g(r).struct.charset=e),placeholder:"请选择方式",class:"d-block custom font-13"},{default:h(()=>[(b(!0),y(x,null,k(g(r).select.charset,e=>(b(),E(V,{key:e.value,label:e.value,value:e.value},{default:h(()=>[v("span",W,z(e.value),1),v("small",G,z(e.label),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])])]),v("div",N,[v("div",X,[v("div",J,[v("label",Z,[w(_,{placement:"top"},{content:h(()=>[...i[27]||(i[27]=[q(" （必须）正常来说默认就行，相对于程序所在的服务器来说，如果数据库不在本地，那么就填写数据库所在的服务器地址 ",-1)])]),default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[28]||(i[28]=v("span",{class:"ms-1"},"地址：",-1))])]),_:1})]),w(D,{modelValue:g(r).struct.hostname,"onUpdate:modelValue":i[2]||(i[2]=e=>g(r).struct.hostname=e),placeholder:"如：localhost"},null,8,["modelValue"])])]),v("div",ee,[v("div",te,[v("label",se,[w(_,{content:"（必须）默认端口是：3306，如果修改过端口，请填写正确的端口号",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[29]||(i[29]=v("span",{class:"ms-1"},"端口号：",-1))])]),_:1})]),w(D,{modelValue:g(r).struct.hostport,"onUpdate:modelValue":i[3]||(i[3]=e=>g(r).struct.hostport=e)},null,8,["modelValue"])])]),v("div",le,[v("div",ae,[v("label",oe,[w(_,{content:"（必须）数据库表前缀",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[30]||(i[30]=v("span",{class:"ms-1"},"表前缀：",-1))])]),_:1})]),w(D,{modelValue:g(r).struct.prefix,"onUpdate:modelValue":i[4]||(i[4]=e=>g(r).struct.prefix=e),disabled:""},null,8,["modelValue"])])])]),v("div",ne,[v("div",ce,[v("div",re,[v("label",ie,[w(_,{content:"（必须）数据库的名称",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[31]||(i[31]=v("span",{class:"ms-1"},"数据库名：",-1))])]),_:1})]),w(D,{modelValue:g(r).struct.database,"onUpdate:modelValue":i[5]||(i[5]=e=>g(r).struct.database=e)},null,8,["modelValue"])])]),v("div",me,[v("div",de,[v("label",ue,[w(_,{content:"（必须）数据库用户名称",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[32]||(i[32]=v("span",{class:"ms-1"},"用户名：",-1))])]),_:1})]),w(D,{modelValue:g(r).struct.username,"onUpdate:modelValue":i[6]||(i[6]=e=>g(r).struct.username=e)},null,8,["modelValue"])])]),v("div",pe,[v("div",fe,[v("label",be,[w(_,{content:"（必须）数据库的密码",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[33]||(i[33]=v("span",{class:"ms-1"},"密码：",-1))])]),_:1})]),w(D,{modelValue:g(r).struct.password,"onUpdate:modelValue":i[7]||(i[7]=e=>g(r).struct.password=e),"show-password":""},null,8,["modelValue"])])])]),v("div",ye,[w(A,{onClick:i[8]||(i[8]=e=>p.connect()),loading:g(r).load.connect,class:"mx-2"},{default:h(()=>[g(r).item.connect?U("",!0):(b(),E(u,{key:0,name:"connect",size:"14px"})),i[34]||(i[34]=v("span",{class:"ms-1"},"测试连接",-1))]),_:1},8,["loading"]),w(A,{onClick:i[9]||(i[9]=e=>p.next(2)),type:"primary",class:"mx-2"},{default:h(()=>[...i[35]||(i[35]=[q("下一步",-1)])]),_:1})])])):2===g(r).item.active?(b(),y("div",ve,[v("div",we,[v("div",he,[v("div",ge,[v("label",xe,[w(_,{placement:"top"},{content:h(()=>[...i[36]||(i[36]=[q(" （必须）用来登录的账户，此处默认管理员权限 ",-1)])]),default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[37]||(i[37]=v("span",{class:"ms-1"},"帐号：",-1))])]),_:1})]),w(D,{modelValue:g(r).user.account,"onUpdate:modelValue":i[10]||(i[10]=e=>g(r).user.account=e)},null,8,["modelValue"])])]),v("div",_e,[v("div",Ve,[v("label",je,[w(_,{content:"（必须）推荐大于8位，且包含数字、字母和特殊符号",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[38]||(i[38]=v("span",{class:"ms-1"},"密码：",-1))])]),_:1})]),w(D,{modelValue:g(r).user.password1,"onUpdate:modelValue":i[11]||(i[11]=e=>g(r).user.password1=e),"show-password":""},null,8,["modelValue"])])]),v("div",ke,[v("div",Ee,[v("label",ze,[w(_,{content:"（必须）推荐大于8位，且包含数字、字母和特殊符号",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[39]||(i[39]=v("span",{class:"ms-1"},"确认密码：",-1))])]),_:1})]),w(D,{modelValue:g(r).user.password2,"onUpdate:modelValue":i[12]||(i[12]=e=>g(r).user.password2=e),"show-password":""},null,8,["modelValue"])])])]),v("div",qe,[v("div",Ue,[v("div",De,[v("label",Ae,[w(_,{placement:"top"},{content:h(()=>[...i[40]||(i[40]=[q(" 用来显示的昵称 ",-1)])]),default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[41]||(i[41]=v("span",{class:"ms-1"},"昵称：",-1))])]),_:1})]),w(D,{modelValue:g(r).user.nickname,"onUpdate:modelValue":i[13]||(i[13]=e=>g(r).user.nickname=e)},null,8,["modelValue"])])]),v("div",He,[v("div",Te,[v("label",Qe,[w(_,{content:"（必须）开启短信服务之后，用来登录或找回密码",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[42]||(i[42]=v("span",{class:"ms-1"},"邮箱：",-1))])]),_:1})]),w(D,{modelValue:g(r).user.email,"onUpdate:modelValue":i[14]||(i[14]=e=>g(r).user.email=e)},null,8,["modelValue"])])])]),v("div",Be,[v("div",Se,[v("div",Le,[v("label",Ce,[w(_,{content:"简单的介绍一下",placement:"top"},{default:h(()=>[v("span",null,[w(u,{name:"hint",size:"14px"}),i[43]||(i[43]=v("span",{class:"ms-1"},"个人简介：",-1))])]),_:1})]),w(D,{modelValue:g(r).user.description,"onUpdate:modelValue":i[15]||(i[15]=e=>g(r).user.description=e),autosize:{minRows:3,maxRows:10},placeholder:"写点什么吧 ...",type:"textarea"},null,8,["modelValue"])])])]),v("div",Ye,[w(A,{onClick:i[16]||(i[16]=e=>p.prev(1)),class:"mx-2"},{default:h(()=>[...i[44]||(i[44]=[q("上一步",-1)])]),_:1}),w(A,{onClick:i[17]||(i[17]=e=>p.createAdmin()),type:"primary",class:"mx-2"},{default:h(()=>[...i[45]||(i[45]=[q("下一步",-1)])]),_:1})])])):(b(),y("div",$e,[v("div",Ke,[i[53]||(i[53]=v("h3",{class:"alert-heading"},"恭喜您！",-1)),i[54]||(i[54]=v("p",null,"当你看到我的时候，就表示你已经成功的安装 inis 程序，感谢你的使用。",-1)),v("p",null,[i[46]||(i[46]=q("● ",-1)),w(_,{content:"双击复制",placement:"top"},{default:h(()=>[v("span",{onDblclick:i[18]||(i[18]=e=>p.copy(632274746))},"inis官方QQ群：632274746",32)]),_:1}),i[47]||(i[47]=v("span",{class:"mx-2"},"|",-1)),w(_,{content:"双击复制",placement:"top"},{default:h(()=>[v("span",{onDblclick:i[19]||(i[19]=e=>p.copy(926403239))},"开发者QQ群：926403239",32)]),_:1}),i[48]||(i[48]=v("span",{class:"mx-2"},"|",-1)),w(_,{content:"点我前往",placement:"top"},{default:h(()=>[v("span",{onClick:i[20]||(i[20]=e=>p.window("//inis.cc","_blank"))},"官方社区 inis.cc")]),_:1})]),v("p",null,[i[49]||(i[49]=q("● ",-1)),w(_,{content:"双击复制",placement:"top"},{default:h(()=>[v("span",{onDblclick:i[21]||(i[21]=e=>p.copy(97783391))},"作者QQ：97783391",32)]),_:1}),i[50]||(i[50]=v("span",{class:"mx-2"},"|",-1)),w(_,{content:"双击复制",placement:"top"},{default:h(()=>[v("span",{onDblclick:i[22]||(i[22]=e=>p.copy("v-inis"))},"作者微信：v-inis",32)]),_:1}),i[51]||(i[51]=v("span",{class:"mx-2"},"|",-1)),w(_,{content:"点我前往",placement:"top"},{default:h(()=>[v("span",{onClick:i[23]||(i[23]=e=>p.window("https://inis-pro.apifox.cn","_blank"))},"API 文档：inis-pro.apifox.cn")]),_:1})]),i[55]||(i[55]=v("hr",null,null,-1)),v("p",Me,[w(A,{onClick:i[24]||(i[24]=e=>p.window()),type:"primary",class:"mx-2"},{default:h(()=>[...i[52]||(i[52]=[q("回 到 首 页",-1)])]),_:1})])])]))])])}}},Re={__name:"base",setup:e=>(p(()=>{const e=document.querySelector("body");e.setAttribute("data-layout","topnav"),e.setAttribute("inis-theme","white"),e.classList.add("user-select-none");document.querySelector("#app").classList.add("install")}),(e,t)=>(b(),y(x,null,[w(B),w(Pe)],64)))};export{Re as default};
